<script type="text/javascript" src="/assets/jquery-1.11.0.min.js"></script>
<script type="text/javascript" src="/assets/jquery.leanModal.min.js"></script>
<script src="https://ajax.googleapis.com/ajax/libs/jquery/1.12.4/jquery.min.js"></script>
<script src="http://maxcdn.bootstrapcdn.com/bootstrap/3.3.6/js/bootstrap.min.js"></script>
<link rel="stylesheet" href="http://netdna.bootstrapcdn.com/font-awesome/4.0.3/css/font-awesome.min.css" />
<html>
<body>
<header class="navbar navbar-fixed-top navbar-inverse">
  <div class="container">
    <%= link_to "Rate My Lease", root_path, id: "logo" %>

    <nav>
      <ul class="nav navbar-nav navbar-right">
        <% if user_signed_in? %>
        <li>
          <%= link_to "Create a Lease", new_lease_path %>
        </li>
        <li>
          <%= link_to "All Leases", all_leases_path %>
        </li>
        <li>
          <%= link_to "Profile", current_user%>
        </li>
        <li>
          <%= link_to "Settings", edit_user_path(current_user) %>
        </li>
        <li>
        <%= link_to('Logout', destroy_user_session_path, :method => :delete) %>
        </li>
        <li class="dropdown">
					<a href="#" class="dropdown-toggle" data-toggle="dropdown"> Account <span class="caret"></span> </a>
					<ul class="dropdown-menu">
            <li>
							<%= link_to "Profile", current_user %>
						</li>
						<li>
							<%= link_to "Settings", edit_user_path(current_user) %>
						</li>

						<li class="divider"></li>
						<li>
            <%= link_to('Logout', destroy_user_session_path, :method => :delete) %>
            </li>
					</ul>
				</li>
        <script>
          var $j = jQuery.noConflict();
          $j(document).ready(function(){
            $j(".dropdown-toggle").dropdown();
          });
        </script>
        <% else %>
        <%= form_for(resource, as: resource_name, url: session_path(resource_name)) do |f| %>
          <li>
        		  <a id= "modal_trigger" href="#modal"> Logining </a>
          </li>
                <div id="modal" class="popupContainer" style="display:none;">
        					<header class="popupHeader">
        						<span class="header_title">Login</span>
        						<span class="modal_close"><i class="fa fa-times"></i></span>
        					</header>

        					<section class="popupBody">
        						<!-- Social Login -->
        						<div class="social_login">
        							<div class="">
                        <%= link_to user_facebook_omniauth_authorize_path do %>
                          <span class="icon"><i class="fa fa-facebook-square"></i></span> <span class="icon_title">| Continue with Facebook</span>
                        <% end %>
                        <%= link_to user_google_oauth2_omniauth_authorize_path do %>
                          <span class="icon"><i class="fa fa-google-plus"></i></span> <span class="icon_title">| Continue with Google Plus</span> </a>
                        <% end %>
                      	</div>

        							<div class="centeredText">
        								<span>Or by Email</span>
        							</div>

        							<div class="action_btns">
        								<div class="one_half">
        									<a href="#" id="login_form" class="btn">Login</a>
        								</div>
        								<div class="one_half last">
                          <%= link_to "Sign Up", signup_path %>
        								<!--<a href="#" id="register_form" class="btn">Sign up</a>-->
        								</div>
        							</div>
        						</div>

        						<!-- Username & Password Login form -->
        						<div class="user_login">
                      <%= form_for resource, as: resource_name, url: session_path(resource_name),
                                    html: { class: "form-horizontal center"} do |f| %>

                        <div class="form-group">
                          <%= f.text_field :login, autofocus: true, placeholder: "Username or Email", class: "form-control" %>
                        </div>

                        <div class="form-group">
                          <%= f.password_field :password, autocomplete: "off", placeholder: "Password", class: "form-control" %>
                        </div>

                        <% if devise_mapping.rememberable? -%>
                          <div class="form-group">
                            <div class="col-sm-10">
                              <div class="checkbox">
                                <label>
                                  <%= f.check_box :remember_me %> Remember me
                                </label>
                              </div>
                            </div>
                          </div>

        								<div class="action_btns">
        									<div class="one_half">
        										<a href="#" class="btn back_btn"><i class="fa fa-angle-double-left"></i> Back</a>
        									</div>
                          <div class="actions">
                            <%= f.submit "Log in", class: "btn btn-success btn-lg btn-block" %>
                          </div>
        								</div>
        								<% end %>

        							<a href="#" class="forgot_password">Forgot password?</a>
                      <%end%>
        						</div>
        					</section>
        				</div>
              <%end%>
        				<script type="text/javascript">
                var $p = jQuery.noConflict();
        					$p("#modal_trigger").leanModal({
        						top : 200,
        						overlay : 0.6,
        						closeButton : ".modal_close"
        					});
        					$p(function() {
        						// Calling Login Form
        						$p("#login_form").click(function() {
        							$p(".social_login").hide();
        							$p(".user_login").show();
        							return false;
        						});
        						// Going back to Social Forms
        						$p(".back_btn").click(function() {
        							$p(".user_login").hide();
        							$p(".user_register").hide();
        							$p(".social_login").show();
        							$p(".header_title").text('Login');
        							return false;
        						});
        					})
        				</script>
          <li>
            <%= link_to "Create a Lease", new_lease_path %>
          </li>

          <li>
          <%= link_to 'Login', login_path  %>
          </li>
          <li>
            <%= link_to "Sign Up", signup_path %>
          </li>
        <% end %>
      </ul>
    </nav>
</header>
</div>
</body>
</html>
